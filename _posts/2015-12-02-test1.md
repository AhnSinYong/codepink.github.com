---
layout: post
title: 이벤트 발생 시 context 변경 방법
category: 자바스크립트 잘 알지도 못하면서
---

항상 이벤트 바인딩 후 콜백되는 함수 내에서 전역의 this 에 접근하려고 할 때 고민이 많았다.  
self 변수를 선언하고 this 값으로 초기화, 그리고 콜백 함수에서 self 변수를 사용하는 방식을 썼는데 오늘에야 깔끔한 해결 방법을 찾았다.  
심지어 제이쿼리에서 이 기능을 제공하고 있었음. 이제 수많은 바인딩 함수에서 self 남발 그만!


Old Ver.
(function($){

	var self = this;

	this.appName = "nuworld";

	$("#btn_click").on("click", function(){
		console.log(this.appName); // undefined
		console.log(self.appName); // nuworld
	});

})(jQuery);

New Ver.
(function($){

        this.appName = "nuworld";

        $("#btn_click").on("click", $.proxy(function(){
                console.log(this.appName); // nuworld
        }, this));

})(jQuery);


해결책은 콜백 함수를 proxy 함수로 감싸고(첫 번째 매개변수로 전달) 지정하고자 하는 context 를 두 번째 매개변수에 담아 호출하면 끝.  
self 이름을 갖는 변수를 생성하지 않아도 되고 콜백 함수 내에서도 this 가 내가 원하던 context 로 변경됐다!

제이쿼리를 사용하지 않는다면 bind() 를 사용하면 된다.
단, 옛날 브라우저를 사용하고 있다면 직접 구현해서 사용 할 수 도 있음.
