## 6장 객체 지향 프로그래밍 (1부)

### 6.1 객체에 대한 이해
- ECMAScript에는```class```의 개념이 존재하지 않는다.
- **객체**가 존재하며 이는 ```{key: value}``` 형태의 해시 테이블로 이해하면 쉽다.

#### 객체 생성 방법 1 : Object 객체의 인스턴스를 만들어 멤버(프로퍼티, 메서드) 등록

```javascript
var person = new Object();

person.name = 'codepink';
person.age = '31';
person.job = 'front-end developer';

person.sayProfile = function() {
  console.log('My name is' + person.name);
  console.log(person.age + 'years old');
  console.log('I\'m a' + person.job);
}
```

#### 객체 생성 방법 2 : 객체 리터럴 표기법 사용

```javascript
var person = {
  name: 'codepink',
  age: '31',
  job: 'front-end developer',
  sayProfile: function() {
    console.log('My name is' + person.name);
    console.log(person.age + 'years old');
    console.log('I\'m a' + person.job);
  }
};
```

### 6.1.1 프로퍼티 타입
- **데이터 프로퍼티**와 **접근자(accessor) 프로퍼티**가 있다.
- 데이터 프로퍼티는 데이터 값에 대한 위치와 행동을 포함한다.
- 접근자 프로퍼티는 데이터 값을 가져오거나 설정하는 함수로 구성된다.

#### 데이터 프로퍼티의 4가지 속성
- ```[[Configurable]]``` : 해당 프로퍼티를 delete 연산자로 삭제 또는 변경할 수 있는지 여부를 나타낸다. (default 값은 true)
- ```[[Enumerable]]``` : ```for-in``` 루프에서 해당 프로퍼티 반환 여부를 나타낸다. (defulat 값은 true)
- ```[[Writable]]``` : 프로퍼티 값을 수정할 수 있는지 여부를 타내낸다. (default 값은 true)
- ```[[Value]]``` : 프로퍼티의 실제 데이터 값을 포함하며 값을 읽는 위치이다. (default 값은 undefined)

#### 데이터 프로퍼티의 활용 1 : 객체에 프로퍼티를 명시적으로 추가했을 때 어떤 일이 발생하는가?
- 데이터 프로퍼티의 configurable, enumerable, writable 속성이 true로 생성되고 value 속성에 'sunny'가 할당된다.

```javascript
person.name = 'codepink';
```

#### 데이터 프로퍼티의 활용 2 : 4가지 속성 값을 변경해 객체의 프로퍼티 사용 옵션을 변경해본다.
- 기본 프로퍼티 속성을 변경하는 방법은 ```Object.defineProperty()``` 메서드를 사용한다. (ES5 지원)
- ```Object.defineProperty()``` 메서드는 여러 번 호출할 수 있지만 최초 호출시 ```configurable: false```가 설정되면 이후에는 호출할 수 없다.
- 이 메서드를 호출할 때 ```configurable```, ```enumerable```, ```writable``` 속성 값을 명시하지 않으면 default 값이 false로 설정된다.

```javascript
var person = {};

Object.defineProperty(person, 'name', {
  configurable: false,
  value: 'codeblue'
});

console.log(person.name); // 'codeblue'

person.name = 'codepink'; // during 'use strict' mode, this line is error

console.log(person.name); // 'codeblue'

delete name; // during 'use strict' mode, this line is error

console.log(person.name); // 'codeblue'

Object.defineProperty(person, 'name', { // error
  configurable: true,
  value: 'codepink'
});

```

#### 접근자 프로퍼티의 4가지 속성
- ```[[Configurable]]``` : 데이터 프로퍼티와 동일
- ```[[Enumerable]]``` : 데이터 프로퍼티와 동일
- ```[[Get]]``` : 프로퍼티를 읽을 때 호출하는 함수 (default 값은 undefined)
- ```[[Set]]``` : 프로퍼티를 변경할 때 호출하는 함수 (default 값은 undefined)

#### 접근자 프로퍼티의 활용 1 : ```get()```, ```set()``` 함수를 명시적으로 정의하여 프로퍼티 값을 수정해본다.
- 데이터 프로퍼티와 동일하게 ```Object.defineProperty()``` 메서드를 이용한다.

```javascript
var song = {
  _title: 'Sing',
  _artist: 'Ed Sheeran',
  _release: 0,
  desc: 'This song released in ';
};

Object.defineProperty(song, 'release', {
  get: function() {
    return this._release;
  },
  set: function(newYear) {
    if (newYear > 0) {
      this._release = newYear;
      this.desc += this._release;
    }
  }
});

song.release = 2014;

console.log(song.release); // 2014
console.log(song.desc); // 'This song released in 2014'
```

#### 접근자 프로퍼티의 활용 2 : ```get()```, ```set()```메서드를 지원하지 않는 경우에는 어떻게 구현할까?
- ```get()```, ```set()```은 ES5의 메서드이며 IE9 이상, FF4 이상, Safari5 이상, 크롬에서만 사용 가능하다.
- 이전 버전의 경우 ```__defineGetter__()```, ```__defineSetter__()``` 비표준 메서드로 접근자 프로퍼티를 생성할 수 있다.


```javascript
var song = {
  _title: 'Sing',
  _artist: 'Ed Sheeran',
  _release: 0,
  desc: 'This song released in ';
};

song.__defineGetter__('release', function() {
  return this._release;
});

song.__defineSetter__('release', function(newYear) {
    if (newYear > 0) {
      this._release = newYear;
      this.desc += this._release;
    }
});

song.release = 2014;

console.log(song.release); // 2014
console.log(song.desc); // 'This song released in 2014'
```

### 6.1.2 다중 프로퍼티 정의
- 객체는 여러 개의 프로퍼티를 동시에 수정하는 경우가 많다.
- ES5에서는 ```Object.defineProperties()``` 메서드를 제공하며, 이 메서드를 사용하여 생성된 객체는  **일반적인 객체 생성 방법**으로 생성된 객체와 완전히 동일하다.

```javascript
/*

// this is same below example code
var song = {
  _title: 'Sing',
  _artist: 'Ed Sheeran',
  _release: 0,
  desc: 'This song released in ';
};

Object.defineProperty(song, 'release', {
  get: function() {
    return this._release;
  },
  set: function(newYear) {
    if (newYear > 0) {
      this._release = newYear;
      this.desc += this._release;
    }
  }
});
  
*/

var song = {};

Object.defineProperties(song, function() {
  _title: {
    value: 'Sing'
  },
  _artist: {
    value: 'Ed Sheeran'
  },
  _release: {
    value: 0
  },
  desc: {
    value: 'This song released in '
  },
  release: {
    get: function() {
      return this._release;
    },
    set: function(newYear) {
      if (newYear > 0) {
        this._release = newYear;
        this.desc += this._release;
      }      
    }
  }
});

song.release = 2014;

console.log(song.release); // 2014
console.log(song.desc); // 'This song released in 2014'
```

### 6.1.3 프로퍼티 속성 읽기
- ES5에서 ```Object.getOwnPropertyDescription()``` 메서드로 데이터 프로퍼티, 접근자 프로퍼티의 속성 값을 읽을 수 있다.
- 이 메서드를 통해 **데이터 프로퍼티**와 **접근자 프로퍼티**를 구분할 수 있다.

```javascript
var cat = {};

Object.defineProperties(cat, {
  _name: { // 데이터 프로퍼티
    value: 'june'
  },
  name: { // 접근자 프로퍼티
    get: function() {
      return _name;
    },
    set: function(sub) {
      this._name += sub;
    }
  }
});

var myCat = Object.getOwnPropertyDescription(cat, '_name'),
    yourCat = Object.getOwnPropertyDdescription(cat, 'name');
    
console.log(myCat.value); // 'june'
console.log(yourCat.value); // 'undefined'

console.log(mysCat.get); // 'undefined'
console.log(yourCat.get); // 'function'

console.log(myCat.configurable); // false
console.log(yourCat.enumerable); // false

```
